/*
 * @Description: object3d间的碰撞检测
 * @Author: 彭祥 (Email:245803627@qq.com)
 * @Date: 2020-09-09 14:44
 * @LastEditors: PengXiang
 * @LastEditTime: 2020-09-09 14:44
 */



import * as THREE from "three";

function detectCollisionCubes(){

}


/**
 * 碰撞检测
 * @param object1
 * @param object2
 * @returns {*}
 */
export const hitTest = (object1, object2) => {
    if(object1.geometry instanceof THREE.BufferGeometry) {
        var geometry1 = new THREE.Geometry().fromBufferGeometry(object1.geometry);
        object1.geometry = geometry1;
    }
    if(object2.geometry instanceof THREE.BufferGeometry) {
        var geometry2 = new THREE.Geometry().fromBufferGeometry(object2.geometry);
        object2.geometry = geometry2;
    }

    object1.geometry.computeBoundingBox(); //not needed if its already calculated
    object2.geometry.computeBoundingBox();
    object1.updateMatrixWorld();
    object2.updateMatrixWorld();

    var box1 = object1.geometry.boundingBox.clone();
    box1.applyMatrix4(object1.matrixWorld);

    var box2 = object2.geometry.boundingBox.clone();
    box2.applyMatrix4(object2.matrixWorld);

    return box1.intersectsBox(box2);
}
